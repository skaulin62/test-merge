{"ast":null,"code":"import React,{useCallback}from\"react\";import Categories from\"../components/Categories.tsx\";import Sort,{selects}from\"../components/Sort.tsx\";import{useAxios}from\"../hooks/useAxios.ts\";import PizzaCard from\"../components/PizzaCard/PizzaCard.tsx\";import PizzaSkeletonCard from\"../components/PizzaCard/PizzaSkeletonCard.tsx\";import{useCategory}from\"../hooks/usePizzas.ts\";import Pagination from\"../components/Pagination/index.tsx\";import{useSelector}from\"react-redux\";import{useNavigate,useSearchParams}from\"react-router-dom\";import{selectorFilter,setParams}from\"../Redux/slices/filterSlice.ts\";import{fetchPizzas,selectorPizzas}from\"../Redux/slices/pizzasSlice.ts\";import qs from\"qs\";import{useAppDispatch}from\"../Redux/store.ts\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Home(){const navigate=useNavigate();const dispatch=useAppDispatch();let[searchParams,setSearchParams]=useSearchParams();const{items,status}=useSelector(selectorPizzas);const{filter,sort,currentPage,searchValue}=useSelector(selectorFilter);const[type,setType]=React.useState(\"number\");const changeType=useCallback(type2=>{setType(type2);},[]);// me\nconst[axiosPizzas,isLoadingPizzas,errorPizzas]=useAxios(async page=>{// const response = await PizzaService.getAll(page);\ndispatch(fetchPizzas(page));// setPizzas(response.data);\n});const sortedArr=useCategory([...items],sort,type,filter,searchValue);React.useEffect(()=>{if(searchParams.size>0){const sort=selects.find(obj=>obj.sort===searchParams.get(\"sort\"));dispatch(setParams({filter:Number(searchParams.get(\"filter\")),currentPage:Number(searchParams.get(\"currentPage\")),sort:sort||selects[0],searchValue:\"\"}));}},[]);React.useEffect(()=>{window.scrollTo(0,0);//@ts-ignore\naxiosPizzas(currentPage);},[currentPage]);React.useEffect(()=>{const queryString=qs.stringify({sort:sort.sort,filter,currentPage});navigate(\"?\".concat(queryString));},[sort.sort,filter,currentPage]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"content__top\",children:[/*#__PURE__*/_jsx(Categories,{}),/*#__PURE__*/_jsx(Sort,{setType:changeType})]}),/*#__PURE__*/_jsx(\"h2\",{className:\"content__title\",children:\"\\u0412\\u0441\\u0435 \\u043F\\u0438\\u0446\\u0446\\u044B\"}),status===\"error\"?/*#__PURE__*/_jsx(\"h2\",{style:{padding:\"60px 0\",textAlign:\"center\"},children:\"\\u041F\\u0440\\u043E\\u0438\\u0437\\u043E\\u0448\\u043B\\u0430 \\u043E\\u0448\\u0438\\u0431\\u043A\\u0430 \\uD83D\\uDE25\"}):status===\"loading\"?/*#__PURE__*/_jsxs(\"div\",{className:\"content__items\",children:[[...Array(8)].map((_,index)=>/*#__PURE__*/_jsx(PizzaSkeletonCard,{},index)),\" \"]}):/*#__PURE__*/_jsxs(\"div\",{className:\"content__items\",children:[\" \",sortedArr.map(item=>/*#__PURE__*/_jsx(PizzaCard,{item:item},item.id)),\" \"]}),/*#__PURE__*/_jsx(Pagination,{})]});}","map":{"version":3,"names":["React","useCallback","Categories","Sort","selects","useAxios","PizzaCard","PizzaSkeletonCard","useCategory","Pagination","useSelector","useNavigate","useSearchParams","selectorFilter","setParams","fetchPizzas","selectorPizzas","qs","useAppDispatch","jsx","_jsx","jsxs","_jsxs","Home","navigate","dispatch","searchParams","setSearchParams","items","status","filter","sort","currentPage","searchValue","type","setType","useState","changeType","type2","axiosPizzas","isLoadingPizzas","errorPizzas","page","sortedArr","useEffect","size","find","obj","get","Number","window","scrollTo","queryString","stringify","concat","className","children","style","padding","textAlign","Array","map","_","index","item","id"],"sources":["C:/Users/skaullin62/Desktop/ReactAppsTS/pizza/src/pages/Home.tsx"],"sourcesContent":["import React, { useCallback } from \"react\";\r\nimport Categories from \"../components/Categories.tsx\";\r\nimport Sort, { selects } from \"../components/Sort.tsx\";\r\nimport { useAxios } from \"../hooks/useAxios.ts\";\r\nimport PizzaCard from \"../components/PizzaCard/PizzaCard.tsx\";\r\nimport PizzaSkeletonCard from \"../components/PizzaCard/PizzaSkeletonCard.tsx\";\r\nimport { useCategory } from \"../hooks/usePizzas.ts\";\r\nimport Pagination from \"../components/Pagination/index.tsx\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useNavigate, useSearchParams } from \"react-router-dom\";\r\nimport { selectorFilter, setParams } from \"../Redux/slices/filterSlice.ts\";\r\nimport { fetchPizzas, selectorPizzas } from \"../Redux/slices/pizzasSlice.ts\";\r\nimport qs from \"qs\";\r\nimport { useAppDispatch } from \"../Redux/store.ts\";\r\n\r\nexport default function Home() {\r\n  const navigate = useNavigate();\r\n  const dispatch = useAppDispatch();\r\n  let [searchParams, setSearchParams] = useSearchParams();\r\n  const { items, status } = useSelector(selectorPizzas);\r\n  const { filter, sort, currentPage, searchValue } =\r\n    useSelector(selectorFilter);\r\n  const [type, setType] = React.useState<string>(\"number\");\r\n\r\n  const changeType = useCallback((type2: string) => {\r\n    setType(type2);\r\n  }, []);\r\n  // me\r\n  const [axiosPizzas, isLoadingPizzas, errorPizzas] = useAxios(\r\n    async (page: number) => {\r\n      // const response = await PizzaService.getAll(page);\r\n\r\n      dispatch(fetchPizzas(page));\r\n      // setPizzas(response.data);\r\n    }\r\n  );\r\n  const sortedArr = useCategory([...items], sort, type, filter, searchValue);\r\n\r\n  React.useEffect(() => {\r\n    if (searchParams.size > 0) {\r\n      const sort = selects.find((obj) => obj.sort === searchParams.get(\"sort\"));\r\n\r\n      dispatch(\r\n        setParams({\r\n          filter: Number(searchParams.get(\"filter\")),\r\n          currentPage: Number(searchParams.get(\"currentPage\")),\r\n          sort: sort || selects[0],\r\n          searchValue: \"\",\r\n        })\r\n      );\r\n    }\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    window.scrollTo(0, 0);\r\n    //@ts-ignore\r\n    axiosPizzas(currentPage);\r\n  }, [currentPage]);\r\n\r\n  React.useEffect(() => {\r\n    const queryString = qs.stringify({\r\n      sort: sort.sort,\r\n      filter,\r\n      currentPage,\r\n    });\r\n    navigate(`?${queryString}`);\r\n  }, [sort.sort, filter, currentPage]);\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"content__top\">\r\n        <Categories />\r\n        <Sort setType={changeType} />\r\n      </div>\r\n      <h2 className=\"content__title\">–í—Å–µ –ø–∏—Ü—Ü—ã</h2>\r\n\r\n      {status === \"error\" ? (\r\n        <h2 style={{ padding: \"60px 0\", textAlign: \"center\" }}>\r\n          –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ üò•\r\n        </h2>\r\n      ) : status === \"loading\" ? (\r\n        <div className=\"content__items\">\r\n          {[...Array(8)].map((_, index) => (\r\n            <PizzaSkeletonCard key={index} />\r\n          ))}{\" \"}\r\n        </div>\r\n      ) : (\r\n        <div className=\"content__items\">\r\n          {\" \"}\r\n          {sortedArr.map((item) => (\r\n            <PizzaCard key={item.id} item={item} />\r\n          ))}{\" \"}\r\n        </div>\r\n      )}\r\n\r\n      <Pagination />\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}