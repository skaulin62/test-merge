(self.webpackChunkpizza=self.webpackChunkpizza||[]).push([[268],{6858:(e,t,s)=>{"use strict";s.d(t,{b:()=>i});var r=s(2791);function i(e){const[t,s]=(0,r.useState)(!0),[i,c]=(0,r.useState)("");return[async function(){try{s(!0);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];await e(r)}catch(n){c(n.message)}finally{s(!1)}},t,i]}},830:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>N});var r=s(2791),i=s(9434),c=s(4176),n=s(184);const l=[{title:"\u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u043e\u0441\u0442\u0438 (asc)",sort:"rating"},{title:"\u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u043e\u0441\u0442\u0438 (desc)",sort:"rating"},{title:"\u0446\u0435\u043d\u0435 (asc)",sort:"price"},{title:"\u0446\u0435\u043d\u0435 (desc)",sort:"price"},{title:"\u0430\u043b\u0444\u0430\u0432\u0438\u0442\u0443 (asc)",sort:"title"},{title:"\u0430\u043b\u0444\u0430\u0432\u0438\u0442\u0443 (desc)",sort:"tit2le"}],a=e=>{let{setType:t}=e;const s=(0,i.I0)(),{sort:a}=(0,i.v9)(c.uG),o=r.useRef(null),[d,u]=(0,r.useState)(!1),[h,x]=(0,r.useState)(0);return(0,r.useEffect)((()=>{const e=l.findIndex((e=>e.title===a.title));x(e)}),[a]),r.useEffect((()=>{const e=e=>{const t=e;o.current&&!t.composedPath().includes(o.current)&&(u(!1),console.log("outside"))};return document.body.addEventListener("click",e),()=>{document.body.removeEventListener("click",e)}}),[]),(0,n.jsxs)("div",{className:"sort",ref:o,children:[(0,n.jsxs)("div",{className:"sort__label",children:[(0,n.jsx)("svg",{width:"10",height:"6",viewBox:"0 0 10 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M10 5C10 5.16927 9.93815 5.31576 9.81445 5.43945C9.69075 5.56315 9.54427 5.625 9.375 5.625H0.625C0.455729 5.625 0.309245 5.56315 0.185547 5.43945C0.061849 5.31576 0 5.16927 0 5C0 4.83073 0.061849 4.68424 0.185547 4.56055L4.56055 0.185547C4.68424 0.061849 4.83073 0 5 0C5.16927 0 5.31576 0.061849 5.43945 0.185547L9.81445 4.56055C9.93815 4.68424 10 4.83073 10 5Z",fill:"#2C2C2C"})}),(0,n.jsx)("b",{children:"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430 \u043f\u043e:"}),(0,n.jsx)("span",{onClick:()=>u(!d),children:l[h].title})]}),(0,n.jsx)("div",{className:d?"sort__popup visible":"sort__popup",children:(0,n.jsx)("ul",{children:l.map(((e,r)=>(0,n.jsx)("li",{onClick:()=>function(e){"title"===l[e].sort?t("string"):t("number"),s((0,c.UT)(l[e])),x(e),u(!d)}(r),className:r===h?"active":"",children:e.title},r)))})})]})};var o=s(6858);function d(e,t,s,i,c){const n=function(e,t,s){return(0,r.useMemo)((()=>{let r=[];return r="number"===s?t.title.includes("(asc)")?e.sort(((e,s)=>e[t.sort]-s[t.sort])):e.sort(((e,s)=>s[t.sort]-e[t.sort])):t.title.includes("(asc)")?e.sort(((e,s)=>e[t.sort].localeCompare(s[t.sort]))):e.sort(((e,s)=>s[t.sort].localeCompare(e[t.sort]))),r}),[e,t])}(e,t,s);return function(e,t){return(0,r.useMemo)((()=>t?e.filter((e=>e.title.toLowerCase().includes(t.toLowerCase()))):e),[t,e])}((0,r.useMemo)((()=>0===i?n:n.filter((e=>e.category===i))),[e,i,t]),c)}var u=s(7689),h=s(1087),x=s(7162),m=s(2808),p=s.n(m),g=s(3233),f=s(3992);const j=e=>{let{item:t}=e;const s=(0,i.I0)(),[c,l]=(0,r.useState)(0),[a,o]=(0,r.useState)(0),d=["\u0422\u043e\u043d\u043a\u043e\u0435","\u0422\u0440\u0430\u0434\u0438\u0446\u0438\u043e\u043d\u043d\u043e\u0435"],u=(0,i.v9)((0,f.ms)(t.id)),x=u?u.count:0;return(0,n.jsx)("div",{className:"pizza-block__wrapper",children:(0,n.jsxs)("div",{className:"pizza-block",children:[(0,n.jsx)(h.rU,{to:"/pizza/".concat(t.id),children:(0,n.jsx)("img",{className:"pizza-block__image",src:t.imageUrl,alt:"Pizza"})}),(0,n.jsx)("h4",{className:"pizza-block__title",children:t.title}),(0,n.jsxs)("div",{className:"pizza-block__selector",children:[(0,n.jsx)("ul",{children:t.types.map(((e,t)=>(0,n.jsx)("li",{onClick:()=>o(t),className:t===a?"active":"",children:d[e]},t)))}),(0,n.jsx)("ul",{children:t.sizes.map(((e,t)=>(0,n.jsxs)("li",{className:c===t?"active":"",onClick:()=>l(t),children:[e," \u0441\u043c."]},t)))})]}),(0,n.jsxs)("div",{className:"pizza-block__bottom",children:[(0,n.jsxs)("div",{className:"pizza-block__price",children:["\u043e\u0442 ",t.price," \u20bd"]}),(0,n.jsxs)("div",{className:"button button--outline button--add",children:[(0,n.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M10.8 4.8H7.2V1.2C7.2 0.5373 6.6627 0 6 0C5.3373 0 4.8 0.5373 4.8 1.2V4.8H1.2C0.5373 4.8 0 5.3373 0 6C0 6.6627 0.5373 7.2 1.2 7.2H4.8V10.8C4.8 11.4627 5.3373 12 6 12C6.6627 12 7.2 11.4627 7.2 10.8V7.2H10.8C11.4627 7.2 12 6.6627 12 6C12 5.3373 11.4627 4.8 10.8 4.8Z",fill:"white"})}),(0,n.jsx)("span",{onClick:()=>function(){const e={id:t.id,title:t.title,price:t.price,imageUrl:t.imageUrl,type:String(d[Number(a)]),size:t.sizes[Number(c)],category:t.category,rating:t.rating,count:0};s((0,f.jX)(e))}(),children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"}),x>0&&(0,n.jsx)("i",{children:x})]})]})]})})};var v=s(9562),C=s.n(v);const b={root:"Pagination_root__H4mPD"};function _(){const e=(0,i.I0)();return(0,n.jsx)(C(),{className:b.root,breakLabel:"...",nextLabel:">",onPageChange:t=>e((0,c.YA)(t.selected+1)),pageRangeDisplayed:4,pageCount:3,previousLabel:"<",renderOnZeroPageCount:null})}const w=r.memo((function(){const[e,t]=(0,r.useState)(0),s=(0,i.I0)(),{filter:l}=(0,i.v9)(c.uG);(0,r.useEffect)((()=>{t(l)}),[l]);return(0,n.jsx)("div",{className:"categories",children:(0,n.jsx)("ul",{children:["\u0412\u0441\u0435","\u041c\u044f\u0441\u043d\u044b\u0435","\u0412\u0435\u0433\u0435\u0442\u0430\u0440\u0438\u0430\u043d\u0441\u043a\u0430\u044f","\u0413\u0440\u0438\u043b\u044c","\u041e\u0441\u0442\u0440\u044b\u0435","\u0417\u0430\u043a\u0440\u044b\u0442\u044b\u0435"].map(((r,i)=>(0,n.jsx)("li",{onClick:()=>{t(i),s((0,c.PR)(i))},className:e===i?"active":"",children:r},i)))})})}));var y=s(173);function z(){return(0,n.jsxs)(y.ZP,{speed:0,width:280,height:490,viewBox:"0 0 280 490",backgroundColor:"#f3f3f3",foregroundColor:"#ecebeb",children:[(0,n.jsx)("circle",{cx:"140",cy:"140",r:"120"}),(0,n.jsx)("rect",{x:"0",y:"272",rx:"8",ry:"8",width:"280",height:"29"}),(0,n.jsx)("rect",{x:"0",y:"309",rx:"8",ry:"8",width:"280",height:"88"}),(0,n.jsx)("rect",{x:"1",y:"430",rx:"8",ry:"8",width:"95",height:"30"}),(0,n.jsx)("rect",{x:"130",y:"430",rx:"24",ry:"24",width:"150",height:"45"})]})}function N(){const e=(0,u.s0)(),t=(0,g.T)();let[s,m]=(0,h.lr)();const{items:f,status:v}=(0,i.v9)(x.OS),{filter:C,sort:b,currentPage:y,searchValue:N}=(0,i.v9)(c.uG),[k,P]=r.useState("number"),S=(0,r.useCallback)((e=>{P(e)}),[]),[L,E,H]=(0,o.b)((async e=>{t((0,x.qR)(e))})),V=d([...f],b,k,C,N);return r.useEffect((()=>{if(s.size>0){const e=l.find((e=>e.sort===s.get("sort")));t((0,c.PX)({filter:Number(s.get("filter")),currentPage:Number(s.get("currentPage")),sort:e||l[0],searchValue:""}))}}),[]),r.useEffect((()=>{window.scrollTo(0,0),L(y)}),[y]),r.useEffect((()=>{const t=p().stringify({sort:b.sort,filter:C,currentPage:y});e("?".concat(t))}),[b.sort,C,y]),(0,n.jsxs)("div",{className:"container",children:[(0,n.jsxs)("div",{className:"content__top",children:[(0,n.jsx)(w,{}),(0,n.jsx)(a,{setType:S})]}),(0,n.jsx)("h2",{className:"content__title",children:"\u0412\u0441\u0435 \u043f\u0438\u0446\u0446\u044b"}),"error"===v?(0,n.jsx)("h2",{style:{padding:"60px 0",textAlign:"center"},children:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \ud83d\ude25"}):"loading"===v?(0,n.jsxs)("div",{className:"content__items",children:[[...Array(8)].map(((e,t)=>(0,n.jsx)(z,{},t)))," "]}):(0,n.jsxs)("div",{className:"content__items",children:[" ",V.map((e=>(0,n.jsx)(j,{item:e},e.id)))," "]}),(0,n.jsx)(_,{})]})}},4654:()=>{}}]);
//# sourceMappingURL=Home.31aef360.chunk.js.map